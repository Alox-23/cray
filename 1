#include "player.h"

Player* init_player(){
  Player* p = malloc(sizeof(Player));
  if (!p) return NULL;
  
  p->pos.x = 50;
  p->pos.y = 50;

  p->dir.x = 1;
  p->dir.y = 0;

  return p;
}

static void player_input(Player *player, SDL_Event event){
  while(SDL_PollEvent(&event)){
    printf("event polling");
    if (event.type == SDL_KEYDOWN){
      switch (event.key.keysym.sym) {
        case SDLK_LEFT:
          printf("left key pressed!\n");
          break;
        case SDLK_RIGHT:
          printf("right key pressed!\n");
          break;
        case SDLK_UP:
          printf("up key pressed!\n");
          break;
        case SDLK_DOWN:
          printf("down key pressed!\n");
          break;
        default:
          break;
      }
    }
    else{
      printf("No event");
    }
  }
}

void update_player(Player *player, SDL_Event event){
  player_input(player, event);
}

void destroy_player(Player* p){
  if (!p){
    return;
  }
  else{
    free(p);
    p = NULL;
  }
}
